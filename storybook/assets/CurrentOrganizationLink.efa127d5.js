import{r as e,j as z}from"./jsx-runtime.7911e018.js";import{p as g}from"./index.9ab846ab.js";import{L as h}from"./react-router-dom.cda4aa57.js";import{u as _,a as k,b as v}from"./currentUserContext.5db74ddd.js";const l=t=>({createdAt:new Date(t.created_at),id:t.id,name:t.name,updatedAt:new Date(t.updated_at)}),P=t=>t.get("/organizations").then(n=>n.data.map(l)),U=(t,n)=>t.get(`/organizations/${n}`).then(a=>l(a.data)),m=e.exports.createContext(),$=()=>e.exports.useContext(m),b=({children:t})=>{const[n,a]=e.exports.useState([]),[s,i]=e.exports.useState(),[f,C]=e.exports.useState(),[x,p]=e.exports.useState(!1),{user:d,authenticatedApiClient:r}=_(),u=e.exports.useCallback(async()=>{const o=await P(r);a(o)},[r]),O={currentOrganization:s,fetchCurrentOrganization:async o=>{try{p(!0);const y=k.create({...r.defaults,baseURL:`${v.defaults.baseURL}/organizations/${o}`});C(()=>y);const L=await U(r,o);i(L)}finally{p(!1)}},fetchUserOrganizations:u,isLoadingOrganization:x,organizationClient:f,organizations:n};return e.exports.useEffect(()=>{d&&u()},[d,u]),z(m.Provider,{value:O,children:t})};b.__docgenInfo={description:"",methods:[],displayName:"CurrentOrganizationProvider"};function c(t){const{as:n,to:a,...s}=t,{currentOrganization:i}=$();return z(n,{...s,to:`/organizations/${i.id}${a}`})}c.propTypes={as:g.exports.elementType,to:g.exports.string.isRequired};c.defaultProps={as:h};c.__docgenInfo={description:"",methods:[],displayName:"CurrentOrganizationLink",props:{as:{defaultValue:{value:"Link",computed:!0},type:{name:"elementType"},required:!1,description:""},to:{type:{name:"string"},required:!0,description:""}}};export{c as C,b as a,$ as u};
//# sourceMappingURL=CurrentOrganizationLink.efa127d5.js.map
